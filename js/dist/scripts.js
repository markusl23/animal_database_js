let animalRepository=function(){let e=[];function t(){return e}function n(e,t){e.addEventListener("click",function(){a(t)})}function a(e){i(e).then(function(t){r(e,t)})}function i(e){let t="."+e.stringName,n=document.querySelector(t);return l(n),fetch(e.detailsUrl).then(function(e){return o(n),e.json()}).then(function(e){return e}).catch(function(e){o(n),console.error(e)})}function l(e){let t=document.createElement("p");t.classList.add("loading-message"),t.innerText="Loading animal details...",e.append(t)}function o(){document.querySelector(".loading-message").remove()}let d=new bootstrap.Modal(document.getElementById("animalModal"));function r(e,t){let n=document.getElementById("animalModal"),a=n.querySelector(".modal-title"),i=n.querySelector(".modal-body");i.innerHTML="",a.textContent=e.name;let l=document.createElement("ul");function o(e,t){let n=document.createElement("li");n.classList.add("list-group-item");let a=document.createElement("strong");a.textContent=e+": ";let i=document.createTextNode(t);return n.appendChild(a),n.appendChild(i),n}l.classList.add("list-unstyled","list-group","mb-3"),l.appendChild(o("Habitat",t.element)),l.appendChild(o("Average weight (kg)",t.averageWeightKilogram)),l.appendChild(o("Food type",t.foodType));let r=document.createElement("img");r.classList.add("img-fluid","rounded"),r.src=t.image,r.alt=`photo of ${e.name}`,i.appendChild(l);let s=document.createElement("div");s.classList.add("skeleton"),i.appendChild(s),r.onload=()=>{s.replaceWith(r)},d.show()}return{getAll:t,add:function t(n){e.push(n)},fillAnimalOverview:function t(){let a=document.querySelector(".animal_overview");e.forEach(function(e){let t=document.createElement("li"),i=document.createElement("button"),l=document.createElement("p");i.innerText=e.name,i.classList.add("animal-overview-item-button"),i.setAttribute("aria-label",`Show details about ${e.name}`);let o=e.stringName;l.classList.add(o),t.appendChild(i),t.appendChild(l),a.appendChild(t),n(i,e)})},addAnimalButtonEventHandler:n,showOverviewAnimalDetails:a,loadAnimalList:function e(){let t=document.querySelector("h1");return l(t),fetch("https://worldwide-impact.org/animal_data_api/animal_data.json").then(function(e){return e.json()}).then(function(e){o(t),e.forEach(function(e){animalRepository.add(e)})}).catch(function(e){o(t),console.error(e)})},loadAnimalDetails:i,showLoadingMessage:l,hideLoadingMessage:o,showModal:r}}();animalRepository.loadAnimalList().then(function(){animalRepository.fillAnimalOverview()});